import{S as Fe,i as Oe,s as Ie,e as ae,b as B,d as K,f as De,g as Q,h as u,J as we,k as p,y as Te,a as V,q as R,l as m,m as h,z as Me,c as H,r as j,n as c,H as n,A as Ve,af as G,L as pe,V as Ue,u as He,v as Ce,M as Re,N as je,B as Be,a1 as qe,I as se}from"../chunks/index.0bca4926.js";import{p as ze,n as Je}from"../chunks/stores.fea94504.js";import{f as We}from"../chunks/index.a02c07a6.js";import{p as Ge}from"../chunks/parse.bee59afc.js";import{j as Ke}from"../chunks/singletons.8ee9b9e3.js";import{a as Qe,I as Xe}from"../chunks/navigation.e461c846.js";import{S as Ye}from"../chunks/ServerLogo.8ee85c8f.js";function Ze(r){return Ke.apply_action(r)}function $e(r){const t=JSON.parse(r);return t.data&&(t.data=Ge(t.data)),t}function Ae(r){return HTMLElement.prototype.cloneNode.call(r)}function xe(r,t=()=>{}){const a=async({action:e,result:s,reset:o=!0,invalidateAll:d=!0})=>{s.type==="success"&&(o&&HTMLFormElement.prototype.reset.call(r),d&&await Qe()),(location.origin+location.pathname===e.origin+e.pathname||s.type==="redirect"||s.type==="error")&&Ze(s)};async function l(e){var C,v,A,N;if(((C=e.submitter)!=null&&C.hasAttribute("formmethod")?e.submitter.formMethod:Ae(r).method)!=="post")return;e.preventDefault();const o=new URL((v=e.submitter)!=null&&v.hasAttribute("formaction")?e.submitter.formAction:Ae(r).action),d=new FormData(r),f=(A=e.submitter)==null?void 0:A.getAttribute("name");f&&d.append(f,((N=e.submitter)==null?void 0:N.getAttribute("value"))??"");const _=new AbortController;let g=!1;const q=await t({action:o,cancel:()=>g=!0,controller:_,get data(){return d},formData:d,get form(){return r},formElement:r,submitter:e.submitter})??a;if(g)return;let P;try{const b=await fetch(o,{method:"POST",headers:{accept:"application/json","x-sveltekit-action":"true"},cache:"no-store",body:d,signal:_.signal});P=$e(await b.text()),P.type==="error"&&(P.status=b.status)}catch(b){if((b==null?void 0:b.name)==="AbortError")return;P={type:"error",error:b}}q({action:o,get data(){return d},formData:d,get form(){return r},formElement:r,update:b=>a({action:o,result:P,reset:b==null?void 0:b.reset,invalidateAll:b==null?void 0:b.invalidateAll}),result:P})}return HTMLFormElement.prototype.addEventListener.call(r,"submit",l),{destroy(){HTMLFormElement.prototype.removeEventListener.call(r,"submit",l)}}}function Pe(r){let t,a;return{c(){t=p("p"),a=R(`Welcome to your new Primo server! Enter an email address and password you'll use to
							administrate this server.`),this.h()},l(l){t=m(l,"P",{class:!0});var e=h(t);a=j(e,`Welcome to your new Primo server! Enter an email address and password you'll use to
							administrate this server.`),e.forEach(u),this.h()},h(){c(t,"class","svelte-12uu9cv")},m(l,e){B(l,t,e),n(t,a)},d(l){l&&u(t)}}}function Se(r){let t,a;return{c(){t=p("div"),a=R(r[5]),this.h()},l(l){t=m(l,"DIV",{class:!0});var e=h(t);a=j(e,r[5]),e.forEach(u),this.h()},h(){c(t,"class","error svelte-12uu9cv")},m(l,e){B(l,t,e),n(t,a)},p(l,e){e&32&&He(a,l[5])},d(l){l&&u(t)}}}function Le(r){let t,a,l,e,s,o,d;return{c(){t=p("label"),a=p("span"),l=R("Confirm password"),e=V(),s=p("input"),this.h()},l(f){t=m(f,"LABEL",{class:!0});var _=h(t);a=m(_,"SPAN",{});var g=h(a);l=j(g,"Confirm password"),g.forEach(u),e=H(_),s=m(_,"INPUT",{type:!0,name:!0,class:!0}),_.forEach(u),this.h()},h(){c(s,"type","password"),c(s,"name","password"),c(s,"class","svelte-12uu9cv"),c(t,"class","svelte-12uu9cv")},m(f,_){B(f,t,_),n(t,a),n(a,l),n(t,e),n(t,s),G(s,r[1]),o||(d=pe(s,"input",r[11]),o=!0)},p(f,_){_&2&&s.value!==f[1]&&G(s,f[1])},d(f){f&&u(t),o=!1,d()}}}function et(r){let t,a,l;return a=new Xe({props:{icon:"gg:spinner"}}),{c(){t=p("div"),Te(a.$$.fragment),this.h()},l(e){t=m(e,"DIV",{class:!0});var s=h(t);Me(a.$$.fragment,s),s.forEach(u),this.h()},h(){c(t,"class","icon svelte-12uu9cv")},m(e,s){B(e,t,s),Ve(a,t,null),l=!0},p:se,i(e){l||(Q(a.$$.fragment,e),l=!0)},o(e){K(a.$$.fragment,e),l=!1},d(e){e&&u(t),Be(a)}}}function tt(r){let t;function a(s,o){return s[4]?st:at}let l=a(r),e=l(r);return{c(){e.c(),t=ae()},l(s){e.l(s),t=ae()},m(s,o){e.m(s,o),B(s,t,o)},p(s,o){l!==(l=a(s))&&(e.d(1),e=l(s),e&&(e.c(),e.m(t.parentNode,t)))},i:se,o:se,d(s){e.d(s),s&&u(t)}}}function at(r){let t,a;return{c(){t=p("span"),a=R("Sign up")},l(l){t=m(l,"SPAN",{});var e=h(t);a=j(e,"Sign up"),e.forEach(u)},m(l,e){B(l,t,e),n(t,a)},d(l){l&&u(t)}}}function st(r){let t,a;return{c(){t=p("span"),a=R("Sign in")},l(l){t=m(l,"SPAN",{});var e=h(t);a=j(e,"Sign in"),e.forEach(u)},m(l,e){B(l,t,e),n(t,a)},d(l){l&&u(t)}}}function Ne(r){let t,a,l,e,s,o,d,f,_,g=r[4]?"Sign in":"Create your account",I,q,P,C,v,A,N,b,re,le,D,ne,F,X,ie,oe,T,ue,ce,M,S,L,Y,Z,fe,z,de,me;s=new Ye({});let k=!r[4]&&Pe(),y=r[5]&&Se(r),E=!r[4]&&Le(r);const _e=[tt,et],O=[];function ve(i,w){return i[6]?1:0}return S=ve(r),L=O[S]=_e[S](r),{c(){t=p("main"),a=p("div"),l=p("div"),e=p("div"),Te(s.$$.fragment),o=V(),d=p("div"),f=p("header"),_=p("h1"),I=R(g),q=V(),k&&k.c(),P=V(),y&&y.c(),C=V(),v=p("form"),A=p("div"),N=p("label"),b=p("span"),re=R("Email"),le=V(),D=p("input"),ne=V(),F=p("label"),X=p("span"),ie=R("Password"),oe=V(),T=p("input"),ue=V(),E&&E.c(),ce=V(),M=p("button"),L.c(),this.h()},l(i){t=m(i,"MAIN",{class:!0});var w=h(t);a=m(w,"DIV",{class:!0});var U=h(a);l=m(U,"DIV",{class:!0});var he=h(l);e=m(he,"DIV",{class:!0});var be=h(e);Me(s.$$.fragment,be),be.forEach(u),he.forEach(u),o=H(U),d=m(U,"DIV",{class:!0});var J=h(d);f=m(J,"HEADER",{class:!0});var $=h(f);_=m($,"H1",{class:!0});var ge=h(_);I=j(ge,g),ge.forEach(u),q=H($),k&&k.l($),$.forEach(u),P=H(J),y&&y.l(J),C=H(J),v=m(J,"FORM",{class:!0,method:!0,action:!0});var x=h(v);A=m(x,"DIV",{class:!0});var W=h(A);N=m(W,"LABEL",{class:!0});var ee=h(N);b=m(ee,"SPAN",{});var ye=h(b);re=j(ye,"Email"),ye.forEach(u),le=H(ee),D=m(ee,"INPUT",{type:!0,name:!0,class:!0}),ee.forEach(u),ne=H(W),F=m(W,"LABEL",{class:!0});var te=h(F);X=m(te,"SPAN",{});var Ee=h(X);ie=j(Ee,"Password"),Ee.forEach(u),oe=H(te),T=m(te,"INPUT",{type:!0,name:!0,class:!0}),te.forEach(u),ue=H(W),E&&E.l(W),W.forEach(u),ce=H(x),M=m(x,"BUTTON",{class:!0,type:!0});var ke=h(M);L.l(ke),ke.forEach(u),x.forEach(u),J.forEach(u),U.forEach(u),w.forEach(u),this.h()},h(){c(e,"class","logo-container svelte-12uu9cv"),c(l,"class","logo svelte-12uu9cv"),c(_,"class","svelte-12uu9cv"),c(f,"class","svelte-12uu9cv"),c(D,"type","text"),c(D,"name","email"),c(D,"class","svelte-12uu9cv"),c(N,"class","svelte-12uu9cv"),c(T,"type","password"),c(T,"name","password"),c(T,"class","svelte-12uu9cv"),c(F,"class","svelte-12uu9cv"),c(A,"class","fields svelte-12uu9cv"),c(M,"class","button svelte-12uu9cv"),c(M,"type","submit"),M.disabled=Y=r[4]?!1:r[3],c(v,"class","form svelte-12uu9cv"),c(v,"method","POST"),c(v,"action",Z="?/"+(r[4]?"sign_in":"sign_up")),c(d,"class","box svelte-12uu9cv"),c(a,"class","left svelte-12uu9cv"),c(t,"class","primo-reset svelte-12uu9cv")},m(i,w){B(i,t,w),n(t,a),n(a,l),n(l,e),Ve(s,e,null),n(a,o),n(a,d),n(d,f),n(f,_),n(_,I),n(f,q),k&&k.m(f,null),n(d,P),y&&y.m(d,null),n(d,C),n(d,v),n(v,A),n(A,N),n(N,b),n(b,re),n(N,le),n(N,D),G(D,r[2]),n(A,ne),n(A,F),n(F,X),n(X,ie),n(F,oe),n(F,T),G(T,r[0]),n(A,ue),E&&E.m(A,null),n(v,ce),n(v,M),O[S].m(M,null),z=!0,de||(me=[pe(D,"input",r[9]),pe(T,"input",r[10]),Ue(xe.call(null,v))],de=!0)},p(i,w){(!z||w&16)&&g!==(g=i[4]?"Sign in":"Create your account")&&He(I,g),i[4]?k&&(k.d(1),k=null):k||(k=Pe(),k.c(),k.m(f,null)),i[5]?y?y.p(i,w):(y=Se(i),y.c(),y.m(d,C)):y&&(y.d(1),y=null),w&4&&D.value!==i[2]&&G(D,i[2]),w&1&&T.value!==i[0]&&G(T,i[0]),i[4]?E&&(E.d(1),E=null):E?E.p(i,w):(E=Le(i),E.c(),E.m(A,null));let U=S;S=ve(i),S===U?O[S].p(i,w):(Ce(),K(O[U],1,1,()=>{O[U]=null}),De(),L=O[S],L?L.p(i,w):(L=O[S]=_e[S](i),L.c()),Q(L,1),L.m(M,null)),(!z||w&24&&Y!==(Y=i[4]?!1:i[3]))&&(M.disabled=Y),(!z||w&16&&Z!==(Z="?/"+(i[4]?"sign_in":"sign_up")))&&c(v,"action",Z)},i(i){z||(Q(s.$$.fragment,i),Q(L),fe||Re(()=>{fe=je(t,We,{}),fe.start()}),z=!0)},o(i){K(s.$$.fragment,i),K(L),z=!1},d(i){i&&u(t),Be(s),k&&k.d(),y&&y.d(),E&&E.d(),O[S].d(),de=!1,qe(me)}}}function rt(r){let t=r[4],a,l,e=Ne(r);return{c(){e.c(),a=ae()},l(s){e.l(s),a=ae()},m(s,o){e.m(s,o),B(s,a,o),l=!0},p(s,[o]){o&16&&Ie(t,t=s[4])?(Ce(),K(e,1,1,se),De(),e=Ne(s),e.c(),Q(e,1),e.m(a.parentNode,a)):e.p(s,o)},i(s){l||(Q(e),l=!0)},o(s){K(e),l=!1},d(s){s&&u(a),e.d(s)}}}function lt(r,t,a){let l,e,s,o,d;we(r,ze,v=>a(8,o=v)),we(r,Je,v=>a(6,d=v));let{form:f}=t,_=o.url.searchParams.get("email")||"",g="",I="";function q(){_=this.value,a(2,_)}function P(){g=this.value,a(0,g)}function C(){I=this.value,a(1,I)}return r.$$set=v=>{"form"in v&&a(7,f=v.form)},r.$$.update=()=>{r.$$.dirty&128&&a(5,l=f==null?void 0:f.error),r.$$.dirty&256&&a(4,e=!o.url.searchParams.has("signup")),r.$$.dirty&3&&a(3,s=!g||g!==I)},[g,I,_,s,e,l,d,f,o,q,P,C]}class pt extends Fe{constructor(t){super(),Oe(this,t,lt,rt,Ie,{form:7})}}export{pt as component};
//# sourceMappingURL=4.03f2b60d.js.map
