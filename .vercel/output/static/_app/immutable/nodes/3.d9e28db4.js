import{S as ee,i as te,s as se,k as b,q as H,l as k,m as w,r as z,h,n as g,b as G,H as _,u as le,I as Q,y as C,a as D,z as j,c as A,A as M,L as F,V as be,g as T,v as W,d as N,f as X,B as q,a1 as ae,J as re,M as ke,N as we,a8 as Ee,T as Te,ae as Ie,w as Ne,t as ye,p as ne,af as ue,ag as Se}from"../chunks/index.0bca4926.js";import{I as J,i as De}from"../chunks/navigation.e461c846.js";import{p as ie}from"../chunks/stores.fea94504.js";import"../chunks/Page.svelte_svelte_type_style_lang.8d655cf0.js";import{f as Ae}from"../chunks/index.a02c07a6.js";import{c as Oe}from"../chunks/utils.0f4ac802.js";import{b as x,S as Ve,d as fe,h as Pe}from"../chunks/Modal.344f08ec.js";import{S as Be}from"../chunks/ServerLogo.8ee85c8f.js";function Ue(i){let e,t,s;return{c(){e=b("span"),t=b("span"),s=H(i[0]),this.h()},l(n){e=k(n,"SPAN",{class:!0});var l=w(e);t=k(l,"SPAN",{class:!0});var o=w(t);s=z(o,i[0]),o.forEach(h),l.forEach(h),this.h()},h(){g(t,"class","inner-letter svelte-1pg8fna"),g(e,"class","letter svelte-1pg8fna")},m(n,l){G(n,e,l),_(e,t),_(t,s)},p(n,[l]){l&1&&le(s,n[0])},i:Q,o:Q,d(n){n&&h(e)}}}function Le(i,e,t){let{letter:s="b"}=e;return i.$$set=n=>{"letter"in n&&t(0,s=n.letter)},[s]}class $e extends ee{constructor(e){super(),te(this,e,Le,Ue,se,{letter:0})}}function _e(i){let e,t,s,n,l,o=i[1].email+"",r,u,d,a,c,m,f,p,v,y,B,S,$,O;return s=new $e({props:{letter:i[1].email.slice(0,1)}}),f=new J({props:{icon:"mdi:sign-out"}}),{c(){e=b("div"),t=b("div"),C(s.$$.fragment),n=D(),l=b("span"),r=H(o),u=D(),d=b("hr"),a=D(),c=b("button"),m=b("div"),C(f.$$.fragment),p=D(),v=b("span"),y=H("Sign Out"),this.h()},l(R){e=k(R,"DIV",{class:!0});var V=w(e);t=k(V,"DIV",{class:!0});var I=w(t);j(s.$$.fragment,I),n=A(I),l=k(I,"SPAN",{class:!0});var U=w(l);r=z(U,o),U.forEach(h),I.forEach(h),u=A(V),d=k(V,"HR",{class:!0}),a=A(V),c=k(V,"BUTTON",{class:!0});var E=w(c);m=k(E,"DIV",{class:!0});var L=w(m);j(f.$$.fragment,L),L.forEach(h),p=A(E),v=k(E,"SPAN",{});var P=w(v);y=z(P,"Sign Out"),P.forEach(h),E.forEach(h),V.forEach(h),this.h()},h(){g(l,"class","email svelte-1u5so7j"),g(t,"class","row svelte-1u5so7j"),g(d,"class","svelte-1u5so7j"),g(m,"class","icon svelte-1u5so7j"),g(c,"class","row svelte-1u5so7j"),g(e,"class","popup svelte-1u5so7j")},m(R,V){G(R,e,V),_(e,t),M(s,t,null),_(t,n),_(t,l),_(l,r),_(e,u),_(e,d),_(e,a),_(e,c),_(c,m),M(f,m,null),_(c,p),_(c,v),_(v,y),S=!0,$||(O=F(c,"click",i[2]),$=!0)},p:Q,i(R){S||(T(s.$$.fragment,R),T(f.$$.fragment,R),B||ke(()=>{B=we(e,Ae,{duration:100}),B.start()}),S=!0)},o(R){N(s.$$.fragment,R),N(f.$$.fragment,R),S=!1},d(R){R&&h(e),q(s),q(f),$=!1,O()}}}function Re(i){let e,t,s,n,l,o,r,u,d;s=new $e({props:{letter:i[1].email.slice(0,1)}}),l=new J({props:{icon:"mdi:chevron-"+(i[0]?"up":"down")}});let a=i[0]&&_e(i);return{c(){e=b("div"),t=b("button"),C(s.$$.fragment),n=D(),C(l.$$.fragment),o=D(),a&&a.c(),this.h()},l(c){e=k(c,"DIV",{class:!0});var m=w(e);t=k(m,"BUTTON",{class:!0});var f=w(t);j(s.$$.fragment,f),n=A(f),j(l.$$.fragment,f),f.forEach(h),o=A(m),a&&a.l(m),m.forEach(h),this.h()},h(){g(t,"class","open-popup svelte-1u5so7j"),g(e,"class","MenuPopup svelte-1u5so7j")},m(c,m){G(c,e,m),_(e,t),M(s,t,null),_(t,n),M(l,t,null),_(e,o),a&&a.m(e,null),r=!0,u||(d=[F(t,"click",i[3]),be(Oe.call(null,e)),F(e,"click_outside",i[4])],u=!0)},p(c,[m]){const f={};m&1&&(f.icon="mdi:chevron-"+(c[0]?"up":"down")),l.$set(f),c[0]?a?(a.p(c,m),m&1&&T(a,1)):(a=_e(c),a.c(),T(a,1),a.m(e,null)):a&&(W(),N(a,1,1,()=>{a=null}),X())},i(c){r||(T(s.$$.fragment,c),T(l.$$.fragment,c),T(a),r=!0)},o(c){N(s.$$.fragment,c),N(l.$$.fragment,c),N(a),r=!1},d(c){c&&h(e),q(s),q(l),a&&a.d(),u=!1,ae(d)}}}function Ce(i,e,t){let s;re(i,ie,a=>t(5,s=a));let n=!1;const{user:l,supabase:o}=s.data;async function r(){await o.auth.signOut(),window.location.reload()}return[n,l,r,()=>t(0,n=!n),()=>t(0,n=!1)]}class je extends ee{constructor(e){super(),te(this,e,Ce,Re,se,{})}}function de(i){let e,t,s,n;return{c(){e=b("button"),t=H("Members"),this.h()},l(l){e=k(l,"BUTTON",{class:!0});var o=w(e);t=z(o,"Members"),o.forEach(h),this.h()},h(){g(e,"class","link svelte-w4v1k2")},m(l,o){G(l,e,o),_(e,t),s||(n=F(e,"click",i[1]),s=!0)},p:Q,d(l){l&&h(e),s=!1,n()}}}function me(i){let e,t,s,n,l,o;return l=new J({props:{icon:"gridicons:external"}}),{c(){e=b("a"),t=b("span"),s=H("Docs"),n=D(),C(l.$$.fragment),this.h()},l(r){e=k(r,"A",{class:!0,href:!0,target:!0});var u=w(e);t=k(u,"SPAN",{class:!0});var d=w(t);s=z(d,"Docs"),d.forEach(h),n=A(u),j(l.$$.fragment,u),u.forEach(h),this.h()},h(){g(t,"class","docs"),g(e,"class","link with-icon svelte-w4v1k2"),g(e,"href","https://docs.primocms.org/"),g(e,"target","blank")},m(r,u){G(r,e,u),_(e,t),_(t,s),_(e,n),M(l,e,null),o=!0},i(r){o||(T(l.$$.fragment,r),o=!0)},o(r){N(l.$$.fragment,r),o=!1},d(r){r&&h(e),q(l)}}}function Me(i){let e,t,s,n,l,o,r,u,d;s=new Be({});let a=i[0].data.user.admin&&de(i),c=i[0].data.user.role==="DEV"&&me();return u=new je({}),{c(){e=b("header"),t=b("div"),C(s.$$.fragment),n=D(),l=b("nav"),a&&a.c(),o=D(),c&&c.c(),r=D(),C(u.$$.fragment),this.h()},l(m){e=k(m,"HEADER",{role:!0,"aria-label":!0,class:!0});var f=w(e);t=k(f,"DIV",{class:!0});var p=w(t);j(s.$$.fragment,p),p.forEach(h),n=A(f),l=k(f,"NAV",{class:!0});var v=w(l);a&&a.l(v),o=A(v),c&&c.l(v),r=A(v),j(u.$$.fragment,v),v.forEach(h),f.forEach(h),this.h()},h(){g(t,"class","logo svelte-w4v1k2"),g(l,"class","nav svelte-w4v1k2"),g(e,"role","navigation"),g(e,"aria-label","main navigation"),g(e,"class","svelte-w4v1k2")},m(m,f){G(m,e,f),_(e,t),M(s,t,null),_(e,n),_(e,l),a&&a.m(l,null),_(l,o),c&&c.m(l,null),_(l,r),M(u,l,null),d=!0},p(m,[f]){m[0].data.user.admin?a?a.p(m,f):(a=de(m),a.c(),a.m(l,o)):a&&(a.d(1),a=null),m[0].data.user.role==="DEV"?c?f&1&&T(c,1):(c=me(),c.c(),T(c,1),c.m(l,r)):c&&(W(),N(c,1,1,()=>{c=null}),X())},i(m){d||(T(s.$$.fragment,m),T(c),T(u.$$.fragment,m),d=!0)},o(m){N(s.$$.fragment,m),N(c),N(u.$$.fragment,m),d=!1},d(m){m&&h(e),q(s),a&&a.d(),c&&c.d(),q(u)}}}function qe(i,e,t){let s;return re(i,ie,l=>t(0,s=l)),[s,()=>x("INVITE_COLLABORATORS")]}class Ge extends ee{constructor(e){super(),te(this,e,qe,Me,se,{})}}function he(i,e,t){const s=i.slice();return s[16]=e[t],s[17]=e,s[18]=t,s}function He(i){let e,t,s=i[16].name+"",n,l,o,r,u;return o=new J({props:{icon:"ic:round-chevron-right"}}),{c(){e=b("a"),t=b("span"),n=H(s),l=D(),C(o.$$.fragment),this.h()},l(d){e=k(d,"A",{"data-sveltekit-prefetch":!0,href:!0,class:!0});var a=w(e);t=k(a,"SPAN",{class:!0});var c=w(t);n=z(c,s),c.forEach(h),l=A(a),j(o.$$.fragment,a),a.forEach(h),this.h()},h(){g(t,"class","svelte-ag1fmw"),g(e,"data-sveltekit-prefetch",""),g(e,"href",r=i[16].url),g(e,"class","svelte-ag1fmw")},m(d,a){G(d,e,a),_(e,t),_(t,n),_(e,l),M(o,e,null),u=!0},p(d,a){(!u||a&1)&&s!==(s=d[16].name+"")&&le(n,s),(!u||a&1&&r!==(r=d[16].url))&&g(e,"href",r)},i(d){u||(T(o.$$.fragment,d),u=!0)},o(d){N(o.$$.fragment,d),u=!1},d(d){d&&h(e),q(o)}}}function ze(i){let e,t,s,n;function l(){return i[9](i[16])}function o(){i[10].call(t,i[17],i[18])}return{c(){e=b("form"),t=b("input"),this.h()},l(r){e=k(r,"FORM",{class:!0});var u=w(e);t=k(u,"INPUT",{class:!0,type:!0}),u.forEach(h),this.h()},h(){g(t,"class","reset-input svelte-ag1fmw"),g(t,"type","text"),g(e,"class","svelte-ag1fmw")},m(r,u){G(r,e,u),_(e,t),i[8](t),ue(t,i[16].name),s||(n=[F(t,"blur",l),F(t,"input",o),F(e,"submit",Se(i[11]))],s=!0)},p(r,u){i=r,u&1&&t.value!==i[16].name&&ue(t,i[16].name)},i:Q,o:Q,d(r){r&&h(e),i[8](null),s=!1,ae(n)}}}function Fe(i){let e,t=i[16].id+"",s,n,l;return{c(){e=b("button"),s=H(t),this.h()},l(o){e=k(o,"BUTTON",{style:!0,class:!0});var r=w(e);s=z(r,t),r.forEach(h),this.h()},h(){ne(e,"font-size","0.75rem"),ne(e,"cursor","pointer"),ne(e,"text-align","left"),g(e,"class","svelte-ag1fmw")},m(o,r){G(o,e,r),_(e,s),n||(l=F(e,"click",i[12]),n=!0)},p(o,r){r&1&&t!==(t=o[16].id+"")&&le(s,t)},d(o){o&&h(e),n=!1,l()}}}function pe(i){let e,t,s,n,l,o,r,u,d,a,c,m,f,p,v,y,B,S,$,O,R;s=new J({props:{icon:"clarity:users-solid"}});function V(){return i[13](i[16])}d=new J({props:{icon:"material-symbols:edit-square-outline-rounded"}});function I(){return i[14](i[16])}v=new J({props:{icon:"pepicons-pop:trash"}});function U(){return i[15](i[16])}return{c(){e=b("div"),t=b("button"),C(s.$$.fragment),n=D(),l=b("span"),o=H("Collaborators"),r=D(),u=b("button"),C(d.$$.fragment),a=D(),c=b("span"),m=H("Rename"),f=D(),p=b("button"),C(v.$$.fragment),y=D(),B=b("span"),S=H("Delete"),this.h()},l(E){e=k(E,"DIV",{class:!0});var L=w(e);t=k(L,"BUTTON",{class:!0});var P=w(t);j(s.$$.fragment,P),n=A(P),l=k(P,"SPAN",{class:!0});var Y=w(l);o=z(Y,"Collaborators"),Y.forEach(h),P.forEach(h),r=A(L),u=k(L,"BUTTON",{class:!0});var K=w(u);j(d.$$.fragment,K),a=A(K),c=k(K,"SPAN",{class:!0});var oe=w(c);m=z(oe,"Rename"),oe.forEach(h),K.forEach(h),f=A(L),p=k(L,"BUTTON",{class:!0});var Z=w(p);j(v.$$.fragment,Z),y=A(Z),B=k(Z,"SPAN",{class:!0});var ce=w(B);S=z(ce,"Delete"),ce.forEach(h),Z.forEach(h),L.forEach(h),this.h()},h(){g(l,"class","svelte-ag1fmw"),g(t,"class","site-button svelte-ag1fmw"),g(c,"class","svelte-ag1fmw"),g(u,"class","site-button svelte-ag1fmw"),g(B,"class","svelte-ag1fmw"),g(p,"class","site-button svelte-ag1fmw"),g(e,"class","buttons svelte-ag1fmw")},m(E,L){G(E,e,L),_(e,t),M(s,t,null),_(t,n),_(t,l),_(l,o),_(e,r),_(e,u),M(d,u,null),_(u,a),_(u,c),_(c,m),_(e,f),_(e,p),M(v,p,null),_(p,y),_(p,B),_(B,S),$=!0,O||(R=[F(t,"click",V),F(u,"click",I),F(p,"click",U)],O=!0)},p(E,L){i=E},i(E){$||(T(s.$$.fragment,E),T(d.$$.fragment,E),T(v.$$.fragment,E),$=!0)},o(E){N(s.$$.fragment,E),N(d.$$.fragment,E),N(v.$$.fragment,E),$=!1},d(E){E&&h(e),q(s),q(d),q(v),O=!1,ae(R)}}}function ve(i,e){let t,s,n,l,o,r,u,d,a,c,m,f=e[16].url+"",p,v,y=Te("DEBUGGING"),B,S;n=new Ve({props:{site:e[16]}});const $=[ze,He],O=[];function R(U,E){return U[1].id===U[16].id?0:1}d=R(e),a=O[d]=$[d](e);let V=y&&Fe(e),I=e[2].data.user.admin&&pe(e);return{key:i,first:null,c(){t=b("li"),s=b("a"),C(n.$$.fragment),o=D(),r=b("div"),u=b("div"),a.c(),c=D(),m=b("span"),p=H(f),v=D(),V&&V.c(),B=D(),I&&I.c(),this.h()},l(U){t=k(U,"LI",{class:!0});var E=w(t);s=k(E,"A",{class:!0,href:!0});var L=w(s);j(n.$$.fragment,L),L.forEach(h),o=A(E),r=k(E,"DIV",{class:!0});var P=w(r);u=k(P,"DIV",{class:!0});var Y=w(u);a.l(Y),Y.forEach(h),c=A(P),m=k(P,"SPAN",{class:!0});var K=w(m);p=z(K,f),K.forEach(h),v=A(P),V&&V.l(P),B=A(P),I&&I.l(P),P.forEach(h),E.forEach(h),this.h()},h(){g(s,"class","site-link svelte-ag1fmw"),g(s,"href",l=e[16].url),g(u,"class","site-name"),g(m,"class","site-url svelte-ag1fmw"),g(r,"class","site-info svelte-ag1fmw"),g(t,"class","svelte-ag1fmw"),this.first=t},m(U,E){G(U,t,E),_(t,s),M(n,s,null),_(t,o),_(t,r),_(r,u),O[d].m(u,null),_(r,c),_(r,m),_(m,p),_(r,v),V&&V.m(r,null),_(r,B),I&&I.m(r,null),S=!0},p(U,E){e=U;const L={};E&1&&(L.site=e[16]),n.$set(L),(!S||E&1&&l!==(l=e[16].url))&&g(s,"href",l);let P=d;d=R(e),d===P?O[d].p(e,E):(W(),N(O[P],1,1,()=>{O[P]=null}),X(),a=O[d],a?a.p(e,E):(a=O[d]=$[d](e),a.c()),T(a,1),a.m(u,null)),(!S||E&1)&&f!==(f=e[16].url+"")&&le(p,f),y&&V.p(e,E),e[2].data.user.admin?I?(I.p(e,E),E&4&&T(I,1)):(I=pe(e),I.c(),T(I,1),I.m(r,null)):I&&(W(),N(I,1,1,()=>{I=null}),X())},i(U){S||(T(n.$$.fragment,U),T(a),T(I),S=!0)},o(U){N(n.$$.fragment,U),N(a),N(I),S=!1},d(U){U&&h(t),q(n),O[d].d(),V&&V.d(),I&&I.d()}}}function ge(i){let e,t,s,n,l,o,r,u;const d=[Ke,Je],a=[];function c(m,f){return m[4]?0:1}return s=c(i),n=a[s]=d[s](i),{c(){e=b("li"),t=b("button"),n.c(),l=H(`
              Create a site`),this.h()},l(m){e=k(m,"LI",{class:!0});var f=w(e);t=k(f,"BUTTON",{class:!0});var p=w(t);n.l(p),l=z(p,`
              Create a site`),p.forEach(h),f.forEach(h),this.h()},h(){g(t,"class","create-site svelte-ag1fmw"),g(e,"class","svelte-ag1fmw")},m(m,f){G(m,e,f),_(e,t),a[s].m(t,null),_(t,l),o=!0,r||(u=F(t,"click",i[5]),r=!0)},p:Q,i(m){o||(T(n),o=!0)},o(m){N(n),o=!1},d(m){m&&h(e),a[s].d(),r=!1,u()}}}function Je(i){let e,t,s;return t=new J({props:{icon:"ic:round-plus"}}),{c(){e=b("div"),C(t.$$.fragment),this.h()},l(n){e=k(n,"DIV",{class:!0});var l=w(e);j(t.$$.fragment,l),l.forEach(h),this.h()},h(){g(e,"class","icon svelte-ag1fmw")},m(n,l){G(n,e,l),M(t,e,null),s=!0},i(n){s||(T(t.$$.fragment,n),s=!0)},o(n){N(t.$$.fragment,n),s=!1},d(n){n&&h(e),q(t)}}}function Ke(i){let e,t,s;return t=new J({props:{icon:"eos-icons:loading"}}),{c(){e=b("div"),C(t.$$.fragment),this.h()},l(n){e=k(n,"DIV",{class:!0});var l=w(e);j(t.$$.fragment,l),l.forEach(h),this.h()},h(){g(e,"class","icon svelte-ag1fmw")},m(n,l){G(n,e,l),M(t,e,null),s=!0},i(n){s||(T(t.$$.fragment,n),s=!0)},o(n){N(t.$$.fragment,n),s=!1},d(n){n&&h(e),q(t)}}}function Qe(i){let e,t,s,n,l,o,r=[],u=new Map,d,a;s=new Ge({});let c=i[0].sites;const m=p=>p[16].id;for(let p=0;p<c.length;p+=1){let v=he(i,c,p),y=m(v);u.set(y,r[p]=ve(y,v))}let f=i[0].user.server_member&&ge(i);return{c(){e=b("main"),t=b("div"),C(s.$$.fragment),n=D(),l=b("div"),o=b("ul");for(let p=0;p<r.length;p+=1)r[p].c();d=D(),f&&f.c(),this.h()},l(p){e=k(p,"MAIN",{class:!0});var v=w(e);t=k(v,"DIV",{class:!0});var y=w(t);j(s.$$.fragment,y),n=A(y),l=k(y,"DIV",{class:!0});var B=w(l);o=k(B,"UL",{class:!0});var S=w(o);for(let $=0;$<r.length;$+=1)r[$].l(S);d=A(S),f&&f.l(S),S.forEach(h),B.forEach(h),y.forEach(h),v.forEach(h),this.h()},h(){g(o,"class","sites svelte-ag1fmw"),g(l,"class","sites-container svelte-ag1fmw"),g(t,"class","container svelte-ag1fmw"),g(e,"class","primo-reset svelte-ag1fmw")},m(p,v){G(p,e,v),_(e,t),M(s,t,null),_(t,n),_(t,l),_(l,o);for(let y=0;y<r.length;y+=1)r[y]&&r[y].m(o,null);_(o,d),f&&f.m(o,null),a=!0},p(p,[v]){v&207&&(c=p[0].sites,W(),r=Ee(r,v,m,1,p,c,u,o,Ie,ve,d,he),X()),p[0].user.server_member?f?(f.p(p,v),v&1&&T(f,1)):(f=ge(p),f.c(),T(f,1),f.m(o,null)):f&&(W(),N(f,1,1,()=>{f=null}),X())},i(p){if(!a){T(s.$$.fragment,p);for(let v=0;v<c.length;v+=1)T(r[v]);T(f),a=!0}},o(p){N(s.$$.fragment,p);for(let v=0;v<r.length;v+=1)N(r[v]);N(f),a=!1},d(p){p&&h(e),q(s);for(let v=0;v<r.length;v+=1)r[v].d();f&&f.d()}}}function We(i,e,t){let s;re(i,ie,$=>t(2,s=$));let{data:n}=e;function l($){x({id:"INVITE_SITE_COLLABORATOR",props:{site:$}})}let o;function r(){x({id:"CREATE_SITE",props:{onSuccess:async($,O)=>{await fe.create($,O),De("app:data"),Pe()}}})}async function u($){x({id:"DELETE_SITE",props:{site:$}})}async function d($,O){await fe.update($,{name:O})}let a={id:null,element:null};function c($){Ne[$?"unshift":"push"](()=>{a.element=$,t(1,a)})}const m=$=>d($.id,$.name);function f($,O){$[O].name=this.value,t(0,n)}const p=()=>t(1,a={id:null,element:null}),v=$=>{navigator.clipboard.writeText($.target.innerText),$.target.style.opacity="0.5"},y=$=>l($),B=async $=>{t(1,a={id:$.id,element:null}),await ye(),a.element.focus()},S=$=>u($);return i.$$set=$=>{"data"in $&&t(0,n=$.data)},[n,a,s,l,o,r,u,d,c,m,f,p,v,y,B,S]}class nt extends ee{constructor(e){super(),te(this,e,We,Qe,se,{data:0})}}export{nt as component};
//# sourceMappingURL=3.d9e28db4.js.map
